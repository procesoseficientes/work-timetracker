<h2>Stats</h2>

<form id="filter">
  <input type="hidden" id="page" name="page" value="{{page}}"/>
</form>

{{#each projects}}
  <hr/>
  <h6>{{this.name}}</h6>
  <label>{{this.hours}}h - {{this.description}}</label>
  <div class="progress" style="height: 35px;">
    {{#each this.times}}
    <div 
      class="progress-bar {{this.color}}" 
      role="progressbar" 
      style="width: {{this.percent}}%" 
      aria-valuenow="20" 
      aria-valuemin="0" 
      aria-valuemax="100"
    >
      {{this.user}} ({{this.hours}}h)
    </div>
    {{/each}}
  </div>
  <br/>
{{/each}}

<ul class="pagination">
  {{#if showPrevious}}<li onclick="pagination(-1)" class="page-item bg-dark"><a class="page-link bg-dark text-light">Previous</a></li>{{/if}}
  {{#if showNext}}<li onclick="pagination(1)" class="page-item bg-dark"><a class="page-link bg-dark text-light">Next</a></li>{{/if}}
</ul>

<script>
  function pagination (direction) {
    const newPage = parseInt($('#page').val()) + direction
    $('#page').val(newPage > 0 ? newPage : 0)
    $('#filter').submit()
  }
</script>